#!/usr/bin/env ruby# -*- coding: utf-8 -*-## Sangoから温度情報を受け取り、Graphiteに投げる# require 'mqtt'require 'json'# Sangoへの接続情報定義sango_config = {  'host' => 'lite.mqtt.shiguredo.jp',  'port' => 1883,  'username' => 'riku742652@github',  'password' => 'tIYYfq2cX4MODQjd',  'access_topic' => 'riku742652@github',}# SangoへのMQTT接続sango = MQTT::Client.connect(:remote_host => sango_config['host'],                             :remote_port => sango_config['port'],                             :username => sango_config['username'],                             :password => sango_config['password'])# SangoからデータをSubscribeするtopic = sango_config['access_topic'] + '/' + 'temper'sango.get(topic) do |t, message|  p message  record = JSON.load(message)  p record['type']  p record['sensor']  p record['temper']end
